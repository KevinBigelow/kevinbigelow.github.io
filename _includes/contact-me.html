<section class="contact-section uk-container uk-container-center">
    <a id="contact-form-section"></a>
    <div class="uk-grid uk-grid-medium">
        <div class="contact-section--content uk-width-1-1 uk-width-medium-1-2" data-uk-scrollspy="{cls:'uk-animation-fade'}">
            <div class="contact-section--title">
                <h3>Contact Me</h3>
                <p>Utilize my design and code expertise on your next project.</p>
                <p>Shoot me a message to get stated.</p>
            </div>
            <ul class="icons icons-left uk-hidden-small">
                {% include _social-icons.html %}
            </ul>
        </div>
        <div class="kb-form-wrap uk-width-1-1 uk-width-medium-1-2" data-uk-scrollspy="{cls:'uk-animation-slide-right'}">
            <div id="kb-form-success" class="kb-form-alert kb-form-alert-hidden kb-form-alert-success uk-animation-slide-bottom">
                <h4>Your message was sent!</h4>
                <p>I typically respond within 48 hours.</p>
            </div>
            <div id="kb-form-error" class="kb-form-alert kb-form-alert-hidden kb-form-alert-danger uk-animation-slide-bottom">
                <h4>Blast!</h4>
                <p>Something went wrong, try again or email me. </p>
                <p class="text-regular">{{ site.email }}</p>
            </div>
            <form id="contact-form" class="uk-form uk-form-stacked kb-form uk-clearfix">
                <span class="kb-form-overlay">
                    <i class="fa fa-spinner fa-spin fa-4x"></i>
                </span>
                <label for="form-name" class="uk-form-label kb-form-label">Your Name</label>
                <div class="uk-form-controls">
                    <input type="text" id="form-name" name="name">
                </div>
                <label for="form-email" class="uk-form-label kb-form-label">Your Email</label>
                <div class="uk-form-controls">
                    <input type="email" id="form-email" name="_replyto">
                </div>
                <label for="form-message" class="uk-form-label kb-form-label">Message</label>
                <div class="uk-form-controls">
                    <textarea type="text" id="form-message" name="message"></textarea>
                </div>
                <input type="text" name="_gotcha" style="display:none" />
                <input type="submit" value="Send Message" class="button button-fill-blue button-grow uk-button uk-float-right"/>
            </form>
        </div>
        <div class="uk-width-1-1 uk-visible-small margin-top-small margin-bottom-small">
            <ul class="icons">
                {% include _social-icons.html %}
            </ul>
        </div>
    </div>
</section>

<script type="text/javascript">
    $(document).on('submit', $('#contact-form'), function(e) {
    	e.preventDefault();

        var $contactFormWrap = $('.kb-form-wrap'),
            $contactForm = $('#contact-form'),
            $formOverlay = $contactForm.find('.kb-form-overlay'),
            $formSubmitButton = $contactForm.find('input:submit'),
            $formInputs = $contactForm.find('#form-name, #form-email, #form-message'),
            $formErrorMessage = $contactFormWrap.find('#kb-form-error'),
            $formSuccessMessage = $contactFormWrap.find('#kb-form-success');

    	$.ajax({
    		url: '//formspree.io/{{ site.email }}',
    		method: 'POST',
    		data: $(this).serialize(),
    		dataType: 'json',
    		beforeSend: function() {
                $formOverlay.show();
                $formInputs.prop('disabled', true);
                $formSubmitButton.prop('value', 'Sending Message...');
                $formErrorMessage.hide();
                $formSuccessMessage.hide();
    		},
    		success: function(data) {
                $formOverlay.hide();
                $formInputs.prop('disabled', false);
                $formSubmitButton.prop('value', 'Send Another Message');
                $formSuccessMessage.show();
    		},
    		error: function(err) {
                $formOverlay.hide();
                $formInputs.prop('disabled', false);
                $formSubmitButton.prop('value', 'Send Message');
                $formErrorMessage.show();
    		}
    	});

    });
</script>
